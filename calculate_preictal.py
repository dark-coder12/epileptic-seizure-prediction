# Define the text in the given format
data = """
File Name: chb01_01.edf
File Start Time: 11:42:54
File End Time: 12:42:54
Number of Seizures in File: 0

File Name: chb01_02.edf
File Start Time: 12:42:57
File End Time: 13:42:57
Number of Seizures in File: 0

File Name: chb01_03.edf
File Start Time: 13:43:04
File End Time: 14:43:04
Number of Seizures in File: 1
Seizure Start Time: 2996 seconds
Seizure End Time: 3036 seconds

File Name: chb01_04.edf
File Start Time: 14:43:12
File End Time: 15:43:12
Number of Seizures in File: 1
Seizure Start Time: 1467 seconds
Seizure End Time: 1494 seconds

File Name: chb01_05.edf
File Start Time: 15:43:19
File End Time: 16:43:19
Number of Seizures in File: 0

File Name: chb01_06.edf
File Start Time: 16:43:26
File End Time: 17:43:26
Number of Seizures in File: 0

File Name: chb01_07.edf
File Start Time: 17:43:33
File End Time: 18:43:33
Number of Seizures in File: 0

File Name: chb01_08.edf
File Start Time: 18:43:40
File End Time: 19:43:40
Number of Seizures in File: 0

File Name: chb01_09.edf
File Start Time: 19:43:56
File End Time: 20:43:56
Number of Seizures in File: 0

File Name: chb01_10.edf
File Start Time: 20:44:07
File End Time: 21:44:07
Number of Seizures in File: 0

File Name: chb01_11.edf
File Start Time: 21:44:14
File End Time: 22:44:14
Number of Seizures in File: 0

File Name: chb01_12.edf
File Start Time: 22:44:22
File End Time: 23:44:22
Number of Seizures in File: 0

File Name: chb01_13.edf
File Start Time: 23:44:29
File End Time: 24:44:29
Number of Seizures in File: 0

File Name: chb01_14.edf
File Start Time: 00:44:37
File End Time: 1:44:37
Number of Seizures in File: 0

File Name: chb01_15.edf
File Start Time: 01:44:44
File End Time: 2:44:44
Number of Seizures in File: 1
Seizure Start Time: 1732 seconds
Seizure End Time: 1772 seconds

File Name: chb01_16.edf
File Start Time: 02:44:51
File End Time: 3:44:51
Number of Seizures in File: 1
Seizure Start Time: 1015 seconds
Seizure End Time: 1066 seconds

File Name: chb01_17.edf
File Start Time: 03:44:59
File End Time: 4:44:59
Number of Seizures in File: 0

File Name: chb01_18.edf
File Start Time: 04:45:06
File End Time: 5:45:06
Number of Seizures in File: 1
Seizure Start Time: 1720 seconds
Seizure End Time: 1810 seconds

File Name: chb01_19.edf
File Start Time: 05:45:13
File End Time: 6:45:13
Number of Seizures in File: 0

File Name: chb01_20.edf
File Start Time: 06:45:20
File End Time: 7:29:43
Number of Seizures in File: 0

File Name: chb01_21.edf
File Start Time: 07:33:46
File End Time: 8:33:46
Number of Seizures in File: 1
Seizure Start Time: 327 seconds
Seizure End Time: 420 seconds

File Name: chb01_22.edf
File Start Time: 08:33:49
File End Time: 9:33:49
Number of Seizures in File: 0

File Name: chb01_23.edf
File Start Time: 09:33:58
File End Time: 10:33:58
Number of Seizures in File: 0

File Name: chb01_24.edf
File Start Time: 10:34:06
File End Time: 11:34:06
Number of Seizures in File: 0

File Name: chb01_25.edf
File Start Time: 11:34:14
File End Time: 12:34:14
Number of Seizures in File: 0

File Name: chb01_26.edf
File Start Time: 12:34:22
File End Time: 13:13:07
Number of Seizures in File: 1
Seizure Start Time: 1862 seconds
Seizure End Time: 1963 seconds

File Name: chb01_27.edf
File Start Time: 13:13:21
File End Time: 13:23:21
Number of Seizures in File: 0

File Name: chb01_29.edf
File Start Time: 13:24:08
File End Time: 14:24:08
Number of Seizures in File: 0

File Name: chb01_30.edf
File Start Time: 14:24:15
File End Time: 15:24:15
Number of Seizures in File: 0

File Name: chb01_31.edf
File Start Time: 15:24:24
File End Time: 16:24:24
Number of Seizures in File: 0

File Name: chb01_32.edf
File Start Time: 16:24:32
File End Time: 17:24:32
Number of Seizures in File: 0

File Name: chb01_33.edf
File Start Time: 17:24:39
File End Time: 18:24:39
Number of Seizures in File: 0

File Name: chb01_34.edf
File Start Time: 18:24:46
File End Time: 19:24:46
Number of Seizures in File: 0

File Name: chb01_36.edf
File Start Time: 22:14:43
File End Time: 23:14:43
Number of Seizures in File: 0

File Name: chb01_37.edf
File Start Time: 23:14:46
File End Time: 24:14:46
Number of Seizures in File: 0

File Name: chb01_38.edf
File Start Time: 00:14:53
File End Time: 1:14:53
Number of Seizures in File: 0

File Name: chb01_39.edf
File Start Time: 01:15:01
File End Time: 2:15:01
Number of Seizures in File: 0

File Name: chb01_40.edf
File Start Time: 02:15:08
File End Time: 3:15:08
Number of Seizures in File: 0

File Name: chb01_41.edf
File Start Time: 03:15:15
File End Time: 4:15:15
Number of Seizures in File: 0

File Name: chb01_42.edf
File Start Time: 04:15:22
File End Time: 5:15:22
Number of Seizures in File: 0

File Name: chb01_43.edf
File Start Time: 05:15:29
File End Time: 6:15:29
Number of Seizures in File: 0

File Name: chb01_46.edf
File Start Time: 08:15:51
File End Time: 9:15:51
Number of Seizures in File: 0

"""
from datetime import datetime, timedelta

file_sections = data.strip().split('\n\n')

# Initialize variables to store information
results = []
all_preictal_times = []

# Iterate through each file section
for section in file_sections:
    lines = section.split('\n')
    file_info = {}
    seizure_info = None
    
    # Parse and store the information for each file
    for line in lines:
        key, value = line.split(': ')
        if key == "File Start Time" or key == "File End Time":
            # Add leading zeros to hours if less than 10
            time_parts = value.split(':')
            if int(time_parts[0]) < 10 and key == "File End Time":
                value = f"0{time_parts[0]}:{time_parts[1]}:{time_parts[2]}"
        file_info[key] = value
        
        if key == "Number of Seizures in File" and int(value) > 0:
            # If seizures exist in the file, look for seizure information
            for line in lines:
                if line.startswith("Seizure Start Time"):
                    # Include seizure information
                    seizure_start_seconds = int(line.split(': ')[1].split(' seconds')[0])
                elif line.startswith("Seizure End Time"):
                    seizure_end_seconds = int(line.split(': ')[1].split(' seconds')[0])
                    seizure_duration = seizure_end_seconds - seizure_start_seconds
                    
                    # Calculate the seizure start and end times in h:mm:ss format relative to the file start and end times
                    file_start_time_parts = file_info["File Start Time"].split(':')
                    file_start_time_seconds = int(file_start_time_parts[0]) * 3600 + int(file_start_time_parts[1]) * 60 + int(file_start_time_parts[2])
                    seizure_start_hms = divmod(file_start_time_seconds + seizure_start_seconds, 3600)
                    seizure_end_hms = divmod(file_start_time_seconds + seizure_end_seconds, 3600)

                    seizure_s_t = f"{seizure_start_hms[0]:02d}:{seizure_start_hms[1] // 60:02d}:{seizure_start_hms[1] % 60:02d}"
                    seizure_f_t = f"{seizure_end_hms[0]:02d}:{seizure_end_hms[1] // 60:02d}:{seizure_end_hms[1] % 60:02d}"

                    seizure_s_t_formatted = datetime.strptime(seizure_s_t, "%H:%M:%S")

                    # Calculate the time 30 minutes before the seizure start time
                    time_before_start = seizure_s_t_formatted - timedelta(minutes=30)
                    all_preictal_times.append(time_before_start.time())
                  

                    # Format the times as requested, including the time 30 minutes before the start time
                    seizure_info = (
                         f"Seizure Start Time (h:mm:ss): {seizure_start_hms[0]:02d}:{seizure_start_hms[1] // 60:02d}:{seizure_start_hms[1] % 60:02d} - "
                        f"Seizure End Time (h:mm:ss): {seizure_end_hms[0]:02d}:{seizure_end_hms[1] // 60:02d}:{seizure_end_hms[1] % 60:02d} \n\n"
                        f"Preictal Time: {time_before_start.strftime('%H:%M:%S')} \n\n"
                    )
    
    # Construct the result string for each file
    result_str = (
        f"File = {file_info['File Name']} - "
        f"Time: {file_info['File Start Time']} - {file_info['File End Time']} - "
        f"Number of Seizures in File: {file_info['Number of Seizures in File']}"
    )
    
    results.append(result_str)
    
    # Add seizure information if available
    if seizure_info:
        results.append("")
        results.append(seizure_info)
        results.append("______________________________________________")
    else:
        results.append("______________________________________________")

# Print the results
for result in results:
    print(result)


print("____________________________________________________")
print("Preictal times")
print("")

for preictal in all_preictal_times:
    print(preictal)